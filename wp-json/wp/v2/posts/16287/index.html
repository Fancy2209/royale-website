{"id":16287,"date":"2020-03-29T12:07:11","date_gmt":"2020-03-29T10:07:11","guid":{"rendered":"https:\/\/royale.codeoscopic.com\/?p=16287"},"modified":"2020-03-30T15:19:06","modified_gmt":"2020-03-30T13:19:06","slug":"working-with-vector-graphics","status":"publish","type":"post","link":"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/","title":{"rendered":"Working with vector graphics"},"content":{"rendered":"<p>This example shows some ways you can work with vector graphics in Apache Royale. Since Royale draws in part from the sources of Flash and Flex technologies, you&#8217;ll find that <a href=\"https:\/\/help.adobe.com\/en_US\/FlashPlatform\/reference\/actionscript\/3\/flash\/display\/Graphics.html\" rel=\"noopener noreferrer\" target=\"_blank\">the powerful Flash drawing API<\/a> is supported for JavaScript and SWF applications. On the other hand, Apache Royale also supports use of <a href=\"https:\/\/en.wikipedia.org\/wiki\/Scalable_Vector_Graphics\" rel=\"noopener noreferrer\" target=\"_blank\">SVG graphics<\/a>.<\/p>\n<p>In this example we create an Erlenmeyer flask, a measuring and mixing container for laboratories, that we can fill with some kind of strange green fluid. We can change the level of the fill with a Jewel <strong>HSlider<\/strong>, and use a <strong>ToggleButton<\/strong> to show or hide an indicator of the maximum level the liquid can reach. The bottle is be a static SVG shape and the fluid is drawn at runtime as the code responds when the slider value changes.<\/p>\n<h2>Example structure<\/h2>\n<p>We&#8217;re using the <strong>Jewel UI set<\/strong> to build a simple interface as a placeholder for the example. We use a Jewel <strong>Card<\/strong>; the Jewel <strong>HorizontalCenteredLayout<\/strong> centers the card in the card on both axes.<\/p>\n<p>As usual, the <strong>Card<\/strong> has three sections: a <strong>CardHeader<\/strong> (with the title), a <strong>CardPrimaryContent<\/strong> (that holds the bottle) and a <strong>CardActions<\/strong> (with some controls).<\/p>\n<p>This is the main structure:<\/p>\n<div class=\"codecolorer-container mxml solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/>2<br \/>3<br \/>4<br \/>5<br \/>6<br \/>7<br \/>8<br \/>9<br \/>10<br \/>11<br \/>12<br \/>13<br \/>14<br \/>15<br \/>16<br \/>17<br \/>18<br \/>19<br \/>20<br \/>21<br \/>22<br \/><\/div><\/td><td><div class=\"mxml codecolorer\"><span class=\"sc3\"><span class=\"re1\">&lt;j:Card<\/span> width=<span class=\"st0\">&quot;460&quot;<\/span> height=<span class=\"st0\">&quot;680&quot;<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n&nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;j:CardHeader<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;html:H<\/span><span class=\"nu0\">3<\/span> text=<span class=\"st0\">&quot;Working with vector graphics&quot;<\/span> className=<span class=\"st0\">&quot;primary-normal&quot;<\/span><span class=\"re2\">\/&gt;<\/span><\/span><br \/>\n&nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;\/j:CardHeader<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n&nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;j:CardPrimaryContent<\/span> itemsHorizontalAlign=<span class=\"st0\">&quot;itemsCentered&quot;<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n<br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"sc3\"><span class=\"coMULTI\">&lt;!-- Here will have the bottle --&gt;<\/span><\/span><br \/>\n<br \/>\n&nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;\/j:CardPrimaryContent<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n&nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;j:CardActions<\/span> itemsHorizontalAlign=<span class=\"st0\">&quot;itemsRight&quot;<\/span> itemsVerticalAlign=<span class=\"st0\">&quot;itemsCentered&quot;<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;j:BarSection<\/span> width=<span class=\"st0\">&quot;50%&quot;<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n<br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class=\"sc3\"><span class=\"coMULTI\">&lt;!-- Here will go the ToggleButton --&gt;<\/span><\/span><br \/>\n<br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;\/j:BarSection<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;j:BarSection<\/span> width=<span class=\"st0\">&quot;50%&quot;<\/span> itemsHorizontalAlign=<span class=\"st0\">&quot;itemsRight&quot;<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n<br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class=\"sc3\"><span class=\"coMULTI\">&lt;!-- Here will go the Slider --&gt;<\/span><\/span><br \/>\n<br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;\/j:BarSection<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n&nbsp; &nbsp; <span class=\"sc3\"><span class=\"re1\">&lt;\/j:CardActions<\/span><span class=\"re2\">&gt;<\/span><\/span><br \/>\n<span class=\"sc3\"><span class=\"re1\">&lt;\/j:Card<\/span><span class=\"re2\">&gt;<\/span><\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<p>With this code in place we can&#8230;<\/p>\n<h2>Create the bottle<\/h2>\n<p>We use <strong>SVG<\/strong> graphics to assemble the flask, and <strong>ActionScript 3<\/strong> code using the powerful <strong>Flash drawing API<\/strong> to create and manage the liquid. We&#8217;re using both to show you both options so you have more weapons in your arsenal.<\/p>\n<p>For the flask, I created three SVG files using a design tool. You can use whatever tool you prefer to draw vector art and export it in SVG format. I used <a href=\"https:\/\/affinity.serif.com\" rel=\"noopener noreferrer\" target=\"_blank\">Affinity Designer<\/a> software to create it since I think it&#8217;s one of the best professional and modern tools available today. But many other free, open source and commercial options are available, so choose whatever you want.<\/p>\n<p>The flask&#8217;s three files are: A <strong>mask<\/strong>, a <strong>shade<\/strong> (with some reflections and gradients) and the <strong>main flask shape<\/strong>. I loaded the files with the <strong>svg:Image<\/strong> Royale component. Then I added a red indicator line coded In SVG directly in Royale to show that option with <strong>svg:Rect<\/strong>. Finally the fluid uses the <strong>UIGraphicsBase<\/strong> class that lets you work with the Flash drawing API.<\/p>\n<p>I added all the parts to a Jewel <strong>Container<\/strong> so I can position them in relation to each other as layers. The Container clips the content so things that fall outside the container boundaries are hidden.<\/p>\n<p>You can see all the pieces in perspective in the following image:<\/p>\n<p><img loading=\"lazy\" src=\"\/wp-content\/uploads\/2020\/03\/bottle-layers-perspective.png\" alt=\"Bottle layers\" width=\"600\" height=\"600\" class=\"aligncenter size-full wp-image-16295\"\/><\/p>\n<p>Here is the final code of the <strong>Container<\/strong> that composes all the graphic parts:<\/p>\n<div class=\"codecolorer-container mxml solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/>2<br \/>3<br \/>4<br \/>5<br \/>6<br \/>7<br \/>8<br \/>9<br \/>10<br \/>11<br \/>12<br \/>13<br \/>14<br \/>15<br \/>16<br \/>17<br \/>18<br \/>19<br \/>20<br \/>21<br \/><\/div><\/td><td><div class=\"mxml codecolorer\"><span class=\"re1\">&lt;j:Container<\/span> localId=<span class=\"st0\">&quot;fgShape&quot;<\/span> width=<span class=\"st0\">&quot;400&quot;<\/span> height=<span class=\"st0\">&quot;500&quot;<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; <br \/>\n&nbsp; &nbsp; <span class=\"coMULTI\">&lt;!-- liquid --&gt;<\/span> &nbsp; &nbsp;<br \/>\n&nbsp; &nbsp; <span class=\"re1\">&lt;js:UIGraphicsBase<\/span> localId=<span class=\"st0\">&quot;bgShape&quot;<\/span> width=<span class=\"st0\">&quot;400&quot;<\/span> height=<span class=\"st0\">&quot;500&quot;<\/span><span class=\"re2\">\/&gt;<\/span><br \/>\n&nbsp; &nbsp; <br \/>\n&nbsp; &nbsp; <span class=\"coMULTI\">&lt;!-- rule --&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"re1\">&lt;j:Group<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"re1\">&lt;svg:Rect<\/span> localId=<span class=\"st0\">&quot;rule&quot;<\/span> x=<span class=\"st0\">&quot;180&quot;<\/span> y=<span class=\"st0\">&quot;{bgShape.height - rule.height}&quot;<\/span> width=<span class=\"st0\">&quot;6&quot;<\/span> height=<span class=\"st0\">&quot;350&quot;<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class=\"re1\">&lt;svg:fill<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class=\"re1\">&lt;js:SolidColor<\/span> color=<span class=\"st0\">&quot;#ff0000&quot;<\/span> alpha=<span class=\"st0\">&quot;.5&quot;<\/span><span class=\"re2\">\/&gt;<\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class=\"re1\">&lt;\/svg:fill<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"re1\">&lt;\/svg:Rect<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"re1\">&lt;\/j:Group<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"coMULTI\">&lt;!-- fill mask --&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"re1\">&lt;svg:Image<\/span> src=<span class=\"st0\">&quot;assets\/bottle-mask.svg&quot;<\/span> width=<span class=\"st0\">&quot;400&quot;<\/span> height=<span class=\"st0\">&quot;500&quot;<\/span><span class=\"re2\">\/&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"coMULTI\">&lt;!-- inner shade --&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"re1\">&lt;svg:Image<\/span> src=<span class=\"st0\">&quot;assets\/bottle-shade.svg&quot;<\/span> width=<span class=\"st0\">&quot;400&quot;<\/span> height=<span class=\"st0\">&quot;500&quot;<\/span><span class=\"re2\">\/&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"coMULTI\">&lt;!-- main shape --&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"re1\">&lt;svg:Image<\/span> src=<span class=\"st0\">&quot;assets\/bottle-main.svg&quot;<\/span> width=<span class=\"st0\">&quot;400&quot;<\/span> height=<span class=\"st0\">&quot;500&quot;<\/span><span class=\"re2\">\/&gt;<\/span><br \/>\n<br \/>\n<span class=\"re1\">&lt;\/j:Container<\/span><span class=\"re2\">&gt;<\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<p>Notice that the fluid is declared first so the other shapes can hide the fluid that is outside the flask shape.<\/p>\n<h2>Fluid controls<\/h2>\n<p>To provide some interactivity we add a <strong>ToogleButton<\/strong> and an <strong>HSlider<\/strong>. The button lets you show and hide the indicator line; move the slider to change the fluid level from empty to full.<\/p>\n<p>The <strong>ToogleButton<\/strong> has the following code:<\/p>\n<div class=\"codecolorer-container mxml solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/>2<br \/>3<br \/>4<br \/>5<br \/>6<br \/>7<br \/><\/div><\/td><td><div class=\"mxml codecolorer\"><span class=\"re1\">&lt;j:ToggleButton<\/span> localId=<span class=\"st0\">&quot;ruleVisibility&quot;<\/span> <br \/>\n&nbsp; &nbsp; outlined=<span class=\"st0\">&quot;true&quot;<\/span> emphasis=<span class=\"st0\">&quot;emphasized&quot;<\/span><br \/>\n&nbsp; &nbsp; text=<span class=\"st0\">&quot;Hide Rule&quot;<\/span> selectedText=<span class=\"st0\">&quot;Show Rule&quot;<\/span> selected=<span class=\"st0\">&quot;true&quot;<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"re1\">&lt;j:icon<\/span><span class=\"re2\">&gt;<\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"re1\">&lt;js:ToggleFontIcon<\/span> text=<span class=\"st0\">&quot;{MaterialIconType.VISIBILITY_OFF}&quot;<\/span> selectedText=<span class=\"st0\">&quot;{MaterialIconType.VISIBILITY}&quot;<\/span> material=<span class=\"st0\">&quot;true&quot;<\/span><span class=\"re2\">\/&gt;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"re1\">&lt;\/j:icon<\/span><span class=\"re2\">&gt;<\/span><br \/>\n<span class=\"re1\">&lt;\/j:ToggleButton<\/span><span class=\"re2\">&gt;<\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<p>It uses an outlined style with emphasized coloring, and <a href=\"https:\/\/www.material.io\/resources\/icons\/?style=baseline\" rel=\"noopener noreferrer\" target=\"_blank\">material icons<\/a> and texts for both selected and unselected states.<\/p>\n<h2>Show and Hide the indicator with binding<\/h2>\n<p>We control the visibility of the red indicator line with the <strong>data binding<\/strong> Royale feature:<\/p>\n<p>First add <strong>ApplicationDataBinding<\/strong> to the application beads to make Royale support binding at that level (Remember that Royale is <a href=\"https:\/\/apache.github.io\/royale-docs\/features\/payg\" rel=\"noopener noreferrer\" target=\"_blank\">PAYG<\/a>, so we only add code when it is really necessary instead of adding lots of code that you probably will never use to every component). <\/p>\n<p>Then add the binding to the <strong>Group<\/strong> that holds the rule.<\/p>\n<div class=\"codecolorer-container mxml solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/>2<br \/><\/div><\/td><td><div class=\"mxml codecolorer\"><span class=\"coMULTI\">&lt;!-- rule --&gt;<\/span><br \/>\n<span class=\"re1\">&lt;j:Group<\/span> visible=<span class=\"st0\">&quot;{ruleVisibility.selected}&quot;<\/span><span class=\"re2\">&gt;<\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<p>When you run the application, click the button to show and hide the red indicator.<\/p>\n<h2>Add the slider<\/h2>\n<p>We finish the action controls part by adding a label and a slider in the last <strong>BarSection<\/strong> of the <strong>CardActions<\/strong>. The slider lets you change the fluid level.<\/p>\n<div class=\"codecolorer-container mxml solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/>2<br \/><\/div><\/td><td><div class=\"mxml codecolorer\"><span class=\"re1\">&lt;j:Label<\/span> text=<span class=\"st0\">&quot;Slide to fill&quot;<\/span><span class=\"re2\">\/&gt;<\/span><br \/>\n<span class=\"re1\">&lt;j:HSlider<\/span> localId=<span class=\"st0\">&quot;slider&quot;<\/span> value=<span class=\"st0\">&quot;0&quot;<\/span> minimum=<span class=\"st0\">&quot;0&quot;<\/span> maximum=<span class=\"st0\">&quot;500&quot;<\/span><span class=\"re2\">\/&gt;<\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<h2>Drawing the fluid<\/h2>\n<p>Using the drawing API in Royale is easy, and well-supported by both <strong>JavaScript<\/strong> and <strong>SWF<\/strong>. We get the <strong>Graphic<\/strong> instance of the <strong>UIGraphicsBase<\/strong> object in the following way:<\/p>\n<div class=\"codecolorer-container actionscript3 solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/><\/div><\/td><td><div class=\"actionscript3 codecolorer\"><span class=\"kw2\">var<\/span> g<span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=graphics%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:graphics.html\"><span class=\"kw5\">Graphics<\/span><\/a> = <a href=\"http:\/\/www.google.com\/search?q=graphics%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:graphics.html\"><span class=\"kw5\">Graphics<\/span><\/a><span class=\"sy0\">.<\/span>getInstanceFor<span class=\"br0\">&#40;<\/span>bgShape<span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<p>Now we can use the graphics object to invoke drawing functions like <strong>moveTo<\/strong>, <strong>lineTo<\/strong>, and more. <\/p>\n<p>To draw the fluid we use the following function using fills, lines and quadratic bezier curves:<\/p>\n<div class=\"codecolorer-container actionscript3 solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/>2<br \/>3<br \/>4<br \/>5<br \/>6<br \/>7<br \/>8<br \/>9<br \/>10<br \/>11<br \/>12<br \/>13<br \/>14<br \/>15<br \/>16<br \/><\/div><\/td><td><div class=\"actionscript3 codecolorer\"><span class=\"coMULTI\">\/**<br \/>\n&nbsp;* Draw the liquid to fill the bottle<br \/>\n&nbsp;*\/<\/span><br \/>\n<span class=\"kw1\">private<\/span> <span class=\"kw3\">function<\/span> drawLiquid<span class=\"br0\">&#40;<\/span>g<span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=graphics%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:graphics.html\"><span class=\"kw5\">Graphics<\/span><\/a><span class=\"sy0\">,<\/span> <span class=\"kw7\">color<\/span><span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=number%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:number.html\"><span class=\"kw5\">Number<\/span><\/a><span class=\"sy0\">,<\/span> <span class=\"kw7\">alpha<\/span><span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=number%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:number.html\"><span class=\"kw5\">Number<\/span><\/a><span class=\"sy0\">,<\/span> <span class=\"kw7\">x<\/span><span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=int%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:int.html\"><span class=\"kw5\">int<\/span><\/a><span class=\"sy0\">,<\/span> <span class=\"kw7\">y<\/span><span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=int%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:int.html\"><span class=\"kw5\">int<\/span><\/a><span class=\"sy0\">,<\/span> <span class=\"kw7\">width<\/span><span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=int%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:int.html\"><span class=\"kw5\">int<\/span><\/a><span class=\"sy0\">,<\/span> <span class=\"kw7\">height<\/span><span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=int%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:int.html\"><span class=\"kw5\">int<\/span><\/a><span class=\"sy0\">,<\/span> wave<span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=int%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:int.html\"><span class=\"kw5\">int<\/span><\/a><span class=\"br0\">&#41;<\/span><span class=\"sy0\">:<\/span><span class=\"kw1\">void<\/span> <span class=\"br0\">&#123;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"kw1\">if<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">y<\/span> <span class=\"sy0\">&gt;<\/span> <span class=\"kw7\">height<\/span><span class=\"br0\">&#41;<\/span><br \/>\n&nbsp; &nbsp; &nbsp; &nbsp; <span class=\"kw7\">y<\/span> = <span class=\"kw7\">height<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">beginFill<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">color<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">alpha<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">moveTo<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">x<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">height<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">lineTo<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">x<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">y<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">curveTo<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">width<\/span> <span class=\"sy0\">\/<\/span> <span class=\"nu0\">4<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">y<\/span> <span class=\"sy0\">-<\/span> wave<span class=\"sy0\">,<\/span> <span class=\"kw7\">width<\/span> <span class=\"sy0\">\/<\/span> <span class=\"nu0\">2<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">y<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">lineTo<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">width<\/span> <span class=\"sy0\">\/<\/span> <span class=\"nu0\">2<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">y<\/span><span class=\"br0\">&#41;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">curveTo<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">width<\/span> <span class=\"sy0\">*<\/span> <span class=\"nu0\">3<\/span> <span class=\"sy0\">\/<\/span> <span class=\"nu0\">4<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">y<\/span> <span class=\"sy0\">+<\/span> wave<span class=\"sy0\">,<\/span> <span class=\"kw7\">width<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">y<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">lineTo<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">width<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">height<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">lineTo<\/span><span class=\"br0\">&#40;<\/span><span class=\"kw7\">x<\/span><span class=\"sy0\">,<\/span> <span class=\"kw7\">height<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">endFill<\/span><span class=\"br0\">&#40;<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n<span class=\"br0\">&#125;<\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<p>Then to join all the pieces we add a <strong>valueChange<\/strong> event handler to the <strong>HSlider<\/strong>:<\/p>\n<div class=\"codecolorer-container mxml solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/><\/div><\/td><td><div class=\"mxml codecolorer\"><span class=\"sc3\"><span class=\"re1\">&lt;j:HSlider<\/span> localId=<span class=\"st0\">&quot;slider&quot;<\/span> value=<span class=\"st0\">&quot;0&quot;<\/span> minimum=<span class=\"st0\">&quot;0&quot;<\/span> maximum=<span class=\"st0\">&quot;500&quot;<\/span> valueChange=<span class=\"st0\">&quot;changeFill(event)&quot;<\/span><span class=\"re2\">\/&gt;<\/span><\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<p>The <strong>changeFill<\/strong> function is the following:<\/p>\n<div class=\"codecolorer-container actionscript3 solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/>2<br \/>3<br \/>4<br \/>5<br \/>6<br \/>7<br \/>8<br \/>9<br \/>10<br \/>11<br \/>12<br \/><\/div><\/td><td><div class=\"actionscript3 codecolorer\"><span class=\"coMULTI\">\/**<br \/>\n&nbsp;* Fill the bottle<br \/>\n&nbsp;*\/<\/span><br \/>\n<span class=\"kw1\">private<\/span> <span class=\"kw3\">function<\/span> changeFill<span class=\"br0\">&#40;<\/span>event<span class=\"sy0\">:<\/span>ValueChangeEvent<span class=\"br0\">&#41;<\/span><span class=\"sy0\">:<\/span><span class=\"kw1\">void<\/span> <span class=\"br0\">&#123;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"kw2\">var<\/span> g<span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=graphics%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:graphics.html\"><span class=\"kw5\">Graphics<\/span><\/a> = <a href=\"http:\/\/www.google.com\/search?q=graphics%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:graphics.html\"><span class=\"kw5\">Graphics<\/span><\/a><span class=\"sy0\">.<\/span>getInstanceFor<span class=\"br0\">&#40;<\/span>bgShape<span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"kw2\">var<\/span> newHeight<span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=number%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:number.html\"><span class=\"kw5\">Number<\/span><\/a> = transformValueFromRange<span class=\"br0\">&#40;<\/span>slider<span class=\"sy0\">.<\/span><span class=\"kw7\">value<\/span><span class=\"sy0\">,<\/span> slider<span class=\"sy0\">.<\/span>minimum<span class=\"sy0\">,<\/span> slider<span class=\"sy0\">.<\/span>maximum<span class=\"sy0\">,<\/span> <span class=\"nu0\">0<\/span><span class=\"sy0\">,<\/span> rule<span class=\"sy0\">.<\/span><span class=\"kw7\">height<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; <span class=\"kw2\">var<\/span> newY<span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=number%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:number.html\"><span class=\"kw5\">Number<\/span><\/a> = fgShape<span class=\"sy0\">.<\/span><span class=\"kw7\">height<\/span> <span class=\"sy0\">-<\/span> newHeight<span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; <br \/>\n&nbsp; &nbsp; g<span class=\"sy0\">.<\/span><span class=\"kw7\">clear<\/span><span class=\"br0\">&#40;<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; drawLiquid<span class=\"br0\">&#40;<\/span>g<span class=\"sy0\">,<\/span> liquidColor<span class=\"sy0\">,<\/span> <span class=\"sy0\">.<\/span>5<span class=\"sy0\">,<\/span> <span class=\"nu0\">0<\/span><span class=\"sy0\">,<\/span> newY<span class=\"sy0\">,<\/span> <span class=\"nu0\">400<\/span><span class=\"sy0\">,<\/span> <span class=\"nu0\">500<\/span><span class=\"sy0\">,<\/span> <span class=\"sy0\">-<\/span><span class=\"nu0\">15<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n&nbsp; &nbsp; drawLiquid<span class=\"br0\">&#40;<\/span>g<span class=\"sy0\">,<\/span> liquidColor<span class=\"sy0\">,<\/span> <span class=\"nu0\">1<\/span><span class=\"sy0\">,<\/span> &nbsp;<span class=\"nu0\">0<\/span><span class=\"sy0\">,<\/span> newY<span class=\"sy0\">,<\/span> <span class=\"nu0\">400<\/span><span class=\"sy0\">,<\/span> <span class=\"nu0\">500<\/span><span class=\"sy0\">,<\/span> <span class=\"nu0\">30<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n<span class=\"br0\">&#125;<\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<p>When we change the <strong>HSlider<\/strong> position, the code calls the function, gets the graphic object, calculates the new height value based on the current container height (transforming ranges), clears all drawings and redraws two different liquids with some displacement on X and change on the wave length with the new values.<\/p>\n<p>And that&#8217;s all! I hope you like this drawing feature in Royale. You&#8217;ll be able to do many creative things in your Royale applications with it!<\/p>\n<p>As always, enjoy!<\/p>\n<h3>Where to go from here<\/h3>\n<ul>\n<li><a href=\"https:\/\/apache.github.io\/royale-docs\/features\/data-binding\">Apache Royale Data Binding documentation page<\/a><\/li>\n<li><a href=\"https:\/\/apache.github.io\/royale-docs\/component-sets\/jewel\">Apache Royale Jewel UI Set documentation page<\/a><\/li>\n<li><a href=\"https:\/\/apache.github.io\/royale-docs\/component-sets\/jewel\/hslider\">Jewel HSlider Royale Docs page<\/a><\/li>\n<li><a href=\"https:\/\/apache.github.io\/royale-docs\/component-sets\/jewel\/card\">Jewel Card Royale Docs page<\/a><\/li>\n<\/ul>\n<p>The result of this code snippet is the following:<\/p>\n<style type=\"text\/css\">\r\n       .errordiv { padding:10px; margin:10px; border: 1px solid #555555;color: #000000;background-color: #f8f8f8; width:500px; }#advanced_iframe {visibility:visible;opacity:1;vertical-align:top;}.ai-info-bottom-iframe { position: fixed; z-index: 10000; bottom:0; left: 0; margin: 0px; text-align: center; width: 100%; background-color: #ff9999; padding-left: 5px;padding-bottom: 5px; border-top: 1px solid #aaa }#ai-layer-div-advanced_iframe p {height:100%;margin:0;padding:0}<\/style><script type=\"text\/javascript\">  var ai_iframe_width_advanced_iframe = 0;  var ai_iframe_height_advanced_iframe = 0;var aiIsIe8=false;var aiOnloadScrollTop=\"true\";\r\nif (typeof aiReadyCallbacks === 'undefined') {\r\n    var aiReadyCallbacks = [];  \r\n} else if (!(aiReadyCallbacks instanceof Array)) {\r\n    var aiReadyCallbacks = [];\r\n}    function aiShowIframeId(id_iframe) { jQuery(\"#\"+id_iframe).css(\"visibility\", \"visible\");    }    function aiResizeIframeHeight(height) { aiResizeIframeHeight(height,advanced_iframe); }    function aiResizeIframeHeightId(height,width,id) {aiResizeIframeHeightById(id,height);}<\/script><iframe id=\"advanced_iframe\"  name=\"advanced_iframe\"  src=\"\/blog-examples\/BE0014_Working_with_vector_graphics\/index.html\"  width=\"100%\"  height=\"800\"  marginwidth=\"10\"  marginheight=\"10\"  frameborder=\"1\"  allowtransparency=\"true\"  class=\"iframe_blog_examples\"  style=\";width:100%;height:800px;\" ><\/iframe><script type=\"text\/javascript\">var ifrm_advanced_iframe = document.getElementById(\"advanced_iframe\");var hiddenTabsDoneadvanced_iframe = false;\r\nfunction resizeCallbackadvanced_iframe() {}function aiChangeUrl(loc) {}<\/script><script type=\"text\/javascript\"><\/script>\n<p>(We&#8217;re using an iframe to host the compiled results of this example. To see the example in a separate window click <a href=\"\/blog-examples\/BE0014_Working_with_vector_graphics\/index.html\" rel=\"noopener noreferrer\" target=\"_blank\">this link<\/a>.)<\/p>\n<p>The full project with source code can be found <a href=\"\/\/github.com\/apache\/royale-asjs\/tree\/develop\/examples\/blog\/BE0014_Working_with_vector_graphics\" target=\"_blank\" rel=\"noopener noreferrer\">here<\/a>:<\/p>\n<div style=\"text-align:center\"><a href=\"\/\/github.com\/apache\/royale-asjs\/tree\/develop\/examples\/blog\/BE0014_Working_with_vector_graphics\" target=\"_blank\" class=\"grve-btn grve-btn-large grve-round grve-bg-primary-1 grve-bg-hover-black\" style=\"margin-bottom: 20px;max-width: 300px;\" rel=\"noopener noreferrer\"><span><i class=\"fa fa-github\"><\/I>Project Source Code<\/span><\/a><\/div>\n","protected":false},"excerpt":{"rendered":"<p>This example shows some supported ways to work with vector graphics in Apache Royale like SVG graphics and the powerful ActionScript 3 drawing API<\/p>\n","protected":false},"author":1,"featured_media":16322,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[57,48],"tags":[58,73,100,96,101,88,99,98,97,103,102],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v15.1 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Working with vector graphics - Apache Royale\u2122<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Working with vector graphics - Apache Royale\u2122\" \/>\n<meta property=\"og:description\" content=\"This example shows some supported ways to work with vector graphics in Apache Royale like SVG graphics and the powerful ActionScript 3 drawing API\" \/>\n<meta property=\"og:url\" content=\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/\" \/>\n<meta property=\"og:site_name\" content=\"Apache Royale\u2122\" \/>\n<meta property=\"article:publisher\" content=\"\/\/www.facebook.com\/Apache-Royale-249305752259661\/\" \/>\n<meta property=\"article:published_time\" content=\"2020-03-29T10:07:11+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2020-03-30T13:19:06+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/royale.codeoscopic.com\/wp-content\/uploads\/2020\/03\/working-with-vector-graphics.gif\" \/>\n\t<meta property=\"og:image:width\" content=\"952\" \/>\n\t<meta property=\"og:image:height\" content=\"739\" \/>\n<meta property=\"fb:app_id\" content=\"677150849390886\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@ApacheRoyale\" \/>\n<meta name=\"twitter:site\" content=\"@ApacheRoyale\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebSite\",\"@id\":\"https:\/\/royale.codeoscopic.com\/#website\",\"url\":\"https:\/\/royale.codeoscopic.com\/\",\"name\":\"Apache Royale\\u2122\",\"description\":\"Code once. Run everywhere\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/royale.codeoscopic.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/royale.codeoscopic.com\/wp-content\/uploads\/2020\/03\/working-with-vector-graphics.gif\",\"width\":952,\"height\":739},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/#webpage\",\"url\":\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/\",\"name\":\"Working with vector graphics - Apache Royale\\u2122\",\"isPartOf\":{\"@id\":\"https:\/\/royale.codeoscopic.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/#primaryimage\"},\"datePublished\":\"2020-03-29T10:07:11+00:00\",\"dateModified\":\"2020-03-30T13:19:06+00:00\",\"author\":{\"@id\":\"https:\/\/royale.codeoscopic.com\/#\/schema\/person\/8172be3ca9e7f518999ede5486271f97\"},\"breadcrumb\":{\"@id\":\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"item\":{\"@type\":\"WebPage\",\"@id\":\"https:\/\/royale.codeoscopic.com\/\",\"url\":\"https:\/\/royale.codeoscopic.com\/\",\"name\":\"Home\"}},{\"@type\":\"ListItem\",\"position\":2,\"item\":{\"@type\":\"WebPage\",\"@id\":\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/\",\"url\":\"https:\/\/royale.codeoscopic.com\/working-with-vector-graphics\/\",\"name\":\"Working with vector graphics\"}}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/royale.codeoscopic.com\/#\/schema\/person\/8172be3ca9e7f518999ede5486271f97\",\"name\":\"Carlos Rovira\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/royale.codeoscopic.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/67bc22088161c1b320e73f69ff5c310e?s=96&d=mm&r=g\",\"caption\":\"Carlos Rovira\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/posts\/16287"}],"collection":[{"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/comments?post=16287"}],"version-history":[{"count":18,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/posts\/16287\/revisions"}],"predecessor-version":[{"id":16324,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/posts\/16287\/revisions\/16324"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/media\/16322"}],"wp:attachment":[{"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/media?parent=16287"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/categories?post=16287"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/tags?post=16287"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}