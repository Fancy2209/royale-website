{"id":15849,"date":"2018-10-03T00:44:00","date_gmt":"2018-10-02T22:44:00","guid":{"rendered":"https:\/\/royale.codeoscopic.com\/?p=15849"},"modified":"2018-10-03T11:10:24","modified_gmt":"2018-10-03T09:10:24","slug":"hello-node-how-to-transpile-actionscript-for-node-js","status":"publish","type":"post","link":"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/","title":{"rendered":"Hello Node: How to transpile ActionScript for Node.js"},"content":{"rendered":"<div class=\"grve-element grve-message grve-bg-primary-4 grve-margin-bottom-1x\" style=\"color: #444444;\">Note: This tutorial was originally published in <a href=\"https:\/\/www.patreon.com\/josht\">Josh Tynjala<\/a>&#8216;s NextGen ActionScript web site and donated to Apache Royale. The tutorial has been adapted to correct the things that changed in Apache Royale since it was published.<\/div>\n<p>Over the years, many developers have dreamed of using ActionScript on both the client and the server. Today, the Apache Royale\u2122 SDK finally makes it possible.<\/p>\n<p><img loading=\"lazy\" class=\"aligncenter size-full wp-image-15887\" src=\"\/wp-content\/uploads\/2018\/10\/apache-royale-node-js.png\" alt=\"\" width=\"580\" height=\"470\" srcset=\"https:\/\/royale.codeoscopic.com\/wp-content\/uploads\/2018\/10\/apache-royale-node-js.png 580w, https:\/\/royale.codeoscopic.com\/wp-content\/uploads\/2018\/10\/apache-royale-node-js-300x243.png 300w\" sizes=\"(max-width: 580px) 100vw, 580px\" \/><\/p>\n<p>Let&#8217;s learn to use <strong>asnodec<\/strong> to write <strong>ActionScript<\/strong> code that runs in the popular server-side JavaScript environment, <a href=\"http:\/\/nodejs.org\">Node.js<\/a>.<\/p>\n<p><img class=\"grve-align-center img-responsive\" src=\"\/wp-content\/uploads\/2018\/10\/nodejs-terminal.jpg\" srcset=\"\/wp-content\/uploads\/2018\/10\/nodejs-terminal.jpg, \/wp-content\/uploads\/2018\/10\/nodejs-terminal@2x.jpg 2x\" alt=\"Screenshot of Node.js console output running in the terminal\" \/><\/p>\n<p>With <em>asnodec<\/em>, <strong>we&#8217;ll get full access to all Node.js APIs<\/strong>, and it&#8217;s even possible to <strong>require npm modules in ActionScript<\/strong>. We&#8217;ll start with a simple example.<\/p>\n<h2>Requirements<\/h2>\n<p>For this tutorial, you should install <a href=\"https:\/\/nodejs.org\/\"><strong>Node.js<\/strong><\/a>. The newest Long Term Support (LTS) release is recommended.<\/p>\n<p>Additionally, you will need <strong>Apache Royale 0.9.4 or newer<\/strong>. Use the <a href=\"\/download\">downloads page<\/a>, or download it from Node Package Manager with<\/p>\n<pre>npm install @apache-royale\/royale-js -g<\/pre>\n<h2>Create a new project<\/h2>\n<ol>\n<li>Create a new, empty folder for your project, and name it <em>HelloNode<\/em>.<\/li>\n<li>Inside the new project, create a new folder named <em>src<\/em>. This is where our ActionScript classes will go.<\/li>\n<li>Inside the <em>src<\/em> folder, create a file named <em>HelloNode.as<\/em>, and add the following code:\n<div class=\"grve-margin-top-1x\">\n<div class=\"codecolorer-container actionscript3 solarized-dark royale-style codecolorer-noborder\" style=\"overflow:auto;white-space:nowrap;width:100%;\"><table cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"line-numbers\"><div>1<br \/>2<br \/>3<br \/>4<br \/>5<br \/>6<br \/>7<br \/>8<br \/>9<br \/>10<br \/>11<br \/>12<br \/>13<br \/>14<br \/><\/div><\/td><td><div class=\"actionscript3 codecolorer\"><span class=\"kw4\">package<\/span><br \/>\n<span class=\"br0\">&#123;<\/span><br \/>\n<span class=\"kw1\">public<\/span> <span class=\"kw4\">class<\/span> HelloNode<br \/>\n<span class=\"br0\">&#123;<\/span><br \/>\n<span class=\"kw1\">public<\/span> <span class=\"kw3\">function<\/span> HelloNode<span class=\"br0\">&#40;<\/span><span class=\"br0\">&#41;<\/span><br \/>\n<span class=\"br0\">&#123;<\/span><br \/>\nconsole<span class=\"sy0\">.<\/span><span class=\"kw7\">log<\/span><span class=\"br0\">&#40;<\/span><span class=\"st0\">&quot;Hello&quot;<\/span><span class=\"sy0\">,<\/span> process<span class=\"sy0\">.<\/span>release<span class=\"sy0\">.<\/span><span class=\"kw7\">name<\/span><span class=\"sy0\">,<\/span> process<span class=\"sy0\">.<\/span><span class=\"kw7\">version<\/span><span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\ndns<span class=\"sy0\">.<\/span>lookup<span class=\"br0\">&#40;<\/span><span class=\"st0\">&quot;localhost&quot;<\/span><span class=\"sy0\">,<\/span> <span class=\"kw1\">null<\/span><span class=\"sy0\">,<\/span> dnsLookupCallback<span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n<span class=\"br0\">&#125;<\/span><span class=\"kw1\">private<\/span> <span class=\"kw3\">function<\/span> dnsLookupCallback<span class=\"br0\">&#40;<\/span><span class=\"kw7\">error<\/span><span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=object%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:object.html\"><span class=\"kw5\">Object<\/span><\/a><span class=\"sy0\">,<\/span> address<span class=\"sy0\">:<\/span><a href=\"http:\/\/www.google.com\/search?q=string%20inurl:http:\/\/livedocs.adobe.com\/flex\/201\/langref\/%20inurl:string.html\"><span class=\"kw5\">String<\/span><\/a><span class=\"br0\">&#41;<\/span><span class=\"sy0\">:<\/span><span class=\"kw1\">void<\/span><br \/>\n<span class=\"br0\">&#123;<\/span><br \/>\nconsole<span class=\"sy0\">.<\/span><span class=\"kw7\">log<\/span><span class=\"br0\">&#40;<\/span><span class=\"st0\">&quot;The address of localhost is:&quot;<\/span><span class=\"sy0\">,<\/span> address<span class=\"br0\">&#41;<\/span><span class=\"sy0\">;<\/span><br \/>\n<span class=\"br0\">&#125;<\/span><br \/>\n<span class=\"br0\">&#125;<\/span><br \/>\n<span class=\"br0\">&#125;<\/span><\/div><\/td><\/tr><\/tbody><\/table><\/div>\n<\/div>\n<\/li>\n<\/ol>\n<p>In this class, we&#8217;re doing two things. First, we&#8217;re printing the version of Node to the console. Then, we&#8217;re using Node&#8217;s built-in <a href=\"https:\/\/nodejs.org\/api\/dns.html\"><em>dns<\/em><\/a> module to look up an IP address.<\/p>\n<div class=\"grve-element grve-message grve-bg-primary-4 grve-margin-bottom-1x\" style=\"color: #444444;\">It is not necessary to call <em>require()<\/em> for built-in Node modules in ActionScript. The compiler will detect when a module is used, and it will generate the appropriate call to <em>require()<\/em> automatically when generating the final JavaScript. (<em>require()<\/em> is necessary for custom modules)<\/div>\n<h2>Compile the project on the command line<\/h2>\n<p>Inside the Apache Royale SDK, the <em>js\/bin<\/em> folder contains several different exeuctables used to transpile ActionScript to JavaScript.<\/p>\n<div class=\"grve-element grve-message grve-bg-primary-4 grve-margin-bottom-1x\" style=\"color: #444444;\">What do each of those executables in <em>js\/bin<\/em> do?<\/p>\n<ul>\n<li><em>asjsc<\/em> compiles pure ActionScript to JavaScript with access to web browser APIs like the HTML DOM.<\/li>\n<li><em>asnodec<\/em> compiles pure ActionScript to JavaScript with <a href=\"..\/hello-nodejs-transpile-actionscript-asnodec\/\">access to Node.js APIs<\/a> to create server-side or command line projects. <strong>We&#8217;ll use this one.<\/strong><\/li>\n<li><em>mxmlc<\/em> compiles applications that use the Apache Royale framework components.<\/li>\n<\/ul>\n<\/div>\n<p>Use the <strong>asnodec<\/strong> executable to transpile the <em>HelloNode<\/em> ActionScript class that you created above for Node.js.<\/p>\n<pre>asnodec src\/HelloNode.as<\/pre>\n<p>This will produce a folder named <em>bin<\/em> containing <em>js-debug<\/em> and <em>js-release<\/em> folders. The <em>js-debug<\/em> folder contains JavaScript that is easy to read, and each class is loaded at runtime from a separate file. The <em>js-release<\/em> folder contains JavaScript that has been concatenated and minified for production.<\/p>\n<p>The project should now contain the following files and folders:<\/p>\n<p><img class=\"grve-align-center img-responsive\" src=\"\/wp-content\/uploads\/2018\/10\/project-files.jpg\" srcset=\"\/wp-content\/uploads\/2018\/10\/project-files.jpg, \/wp-content\/uploads\/2018\/10\/project-files@2x.jpg 2x\" alt=\"Screenshot of project files, including bin\/js-debug, bin\/js-release, and src\/HelloNode.as\" \/><\/p>\n<p>Finally, let&#8217;s try running our code with Node.js.<\/p>\n<h2>Run the project<\/h2>\n<p>Inside the <em>js-debug<\/em> folder, a file named <em>index.js<\/em> will be created as the entry point for your Node.js project. You can run this script using the<\/p>\n<pre>node<\/pre>\n<p>executable:<\/p>\n<pre>node bin\/js-debug\/index.js<\/pre>\n<p>You should see the following output in your console:<\/p>\n<pre>Hello node v6.11.0\r\nThe address of localhost is: 127.0.0.1\r\n<\/pre>\n<p>(The Node version number might be different, obviously!)<\/p>\n<h2>What&#8217;s Next?<\/h2>\n<p>This is just a simple example, but it gives you a glimpse of how developers can bring ActionScript server-side using Apache Royale and Node.js. By using an established ecosystem like Node.js, ActionScript developers can take advantage of all of the libraries published to NPM and join a large, vibrant community.<\/p>\n<div class=\"grve-margin-bottom-1x\">\n<\/div>\n","protected":false},"excerpt":{"rendered":"<p>Learn to use <em>asnodec<\/em> to write ActionScript code that runs in the popular server-side JavaScript environment, <a href=\"http:\/\/nodejs.org\">Node.js<\/a><\/p>\n","protected":false},"author":13,"featured_media":15887,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[91,89],"tags":[86,90],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v15.1 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Hello Node: How to transpile ActionScript for Node.js - Apache Royale\u2122<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Hello Node: How to transpile ActionScript for Node.js - Apache Royale\u2122\" \/>\n<meta property=\"og:description\" content=\"Learn to use asnodec to write ActionScript code that runs in the popular server-side JavaScript environment, Node.js\" \/>\n<meta property=\"og:url\" content=\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/\" \/>\n<meta property=\"og:site_name\" content=\"Apache Royale\u2122\" \/>\n<meta property=\"article:publisher\" content=\"\/\/www.facebook.com\/Apache-Royale-249305752259661\/\" \/>\n<meta property=\"article:published_time\" content=\"2018-10-02T22:44:00+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2018-10-03T09:10:24+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/royale.codeoscopic.com\/wp-content\/uploads\/2018\/10\/apache-royale-node-js.png\" \/>\n\t<meta property=\"og:image:width\" content=\"580\" \/>\n\t<meta property=\"og:image:height\" content=\"470\" \/>\n<meta property=\"fb:app_id\" content=\"677150849390886\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@ApacheRoyale\" \/>\n<meta name=\"twitter:site\" content=\"@ApacheRoyale\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebSite\",\"@id\":\"https:\/\/royale.codeoscopic.com\/#website\",\"url\":\"https:\/\/royale.codeoscopic.com\/\",\"name\":\"Apache Royale\\u2122\",\"description\":\"Code once. Run everywhere\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/royale.codeoscopic.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/royale.codeoscopic.com\/wp-content\/uploads\/2018\/10\/apache-royale-node-js.png\",\"width\":580,\"height\":470},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/#webpage\",\"url\":\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/\",\"name\":\"Hello Node: How to transpile ActionScript for Node.js - Apache Royale\\u2122\",\"isPartOf\":{\"@id\":\"https:\/\/royale.codeoscopic.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/#primaryimage\"},\"datePublished\":\"2018-10-02T22:44:00+00:00\",\"dateModified\":\"2018-10-03T09:10:24+00:00\",\"author\":{\"@id\":\"https:\/\/royale.codeoscopic.com\/#\/schema\/person\/d8a269f6ff9a9fe840f3f7c7351fce6e\"},\"breadcrumb\":{\"@id\":\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/#breadcrumb\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/\"]}]},{\"@type\":\"BreadcrumbList\",\"@id\":\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/#breadcrumb\",\"itemListElement\":[{\"@type\":\"ListItem\",\"position\":1,\"item\":{\"@type\":\"WebPage\",\"@id\":\"https:\/\/royale.codeoscopic.com\/\",\"url\":\"https:\/\/royale.codeoscopic.com\/\",\"name\":\"Home\"}},{\"@type\":\"ListItem\",\"position\":2,\"item\":{\"@type\":\"WebPage\",\"@id\":\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/\",\"url\":\"https:\/\/royale.codeoscopic.com\/hello-node-how-to-transpile-actionscript-for-node-js\/\",\"name\":\"Hello Node: How to transpile ActionScript for Node.js\"}}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/royale.codeoscopic.com\/#\/schema\/person\/d8a269f6ff9a9fe840f3f7c7351fce6e\",\"name\":\"Josh Tynjala\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/royale.codeoscopic.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/d139585074d7d922125b998d74dcee10?s=96&d=mm&r=g\",\"caption\":\"Josh Tynjala\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/posts\/15849"}],"collection":[{"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/users\/13"}],"replies":[{"embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/comments?post=15849"}],"version-history":[{"count":40,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/posts\/15849\/revisions"}],"predecessor-version":[{"id":16083,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/posts\/15849\/revisions\/16083"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/media\/15887"}],"wp:attachment":[{"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/media?parent=15849"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/categories?post=15849"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/royale.codeoscopic.com\/wp-json\/wp\/v2\/tags?post=15849"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}